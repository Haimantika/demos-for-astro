---
import ModalDelete from "./ModalDelete.astro";
---

<script>
  // Check if user has session
  import { user$ } from "../lib/appwrite";

  const adminButtonsElem: HTMLElement | null =
    document.querySelector("#adminButtons");

  // Show Buttons if user is an admin
  user$.subscribe((user) => {
    if (!adminButtonsElem) return;
    if (user && user.prefs.admin) {
      adminButtonsElem.style.display = "block";
    } else {
      adminButtonsElem.style.display = "none";
    }
  });

  //Modal
  const modalDeleteShowElem: HTMLButtonElement | null =
    document.querySelector("#modal-delete-show");
  const modalDeleteDialogElem: HTMLDialogElement | null =
    document.querySelector("#modal-delete-dialog");

  if (modalDeleteShowElem && modalDeleteDialogElem) {
    modalDeleteShowElem.addEventListener("click", () => {
      modalDeleteDialogElem.showModal();
    });
    modalDeleteDialogElem.addEventListener("close", () => {});
  }
</script>
<style>
  button {
    width: 3rem;
    height: 3rem;
    display: flex;
    cursor: pointer;
  }
  #adminButtons {
    position: absolute;
    top: 0;
    right: 0;
    padding: 1rem 1rem 0 0;
  }
</style>
<section id="adminButtons" style="display: none">
  <div style="display:flex; gap: 0.5rem">
    <ModalDelete>
      <span class="icon-trash" aria-hidden="true"></span>
      <span class="text">Delete</span>
    </ModalDelete>
    <button class="button is-secondary" aria-label="Edit Blog">
      <span class="icon-pencil" aria-hidden="true"></span>
      <span class="text">Edit</span>
    </button>
  </div>
</section>
